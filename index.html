<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Проекты AurumBot</title>
    <style>
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            margin: 0;
            background: linear-gradient(135deg, #74ebd5, #acb6e5);
            color: #333;
        }
        .container {
            display: flex;
            max-width: 1000px;
            width: 100%;
            margin: 20px;
        }
        .main-section {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            max-width: 700px;
            width: 100%;
            text-align: center;
        }
        .log-section {
            background: #f5f5f5;
            padding: 20px;
            margin-left: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            width: 300px;
            max-height: 600px;
            overflow-y: auto;
        }
        .log-section h3 {
            margin-top: 0;
        }
        #logContent {
            font-size: 14px;
            text-align: left;
        }
        input[type="text"], input[type="password"] {
            padding: 12px;
            margin: 10px 0;
            font-size: 16px;
            width: calc(100% - 24px);
            border: 1px solid #ccc;
            border-radius: 6px;
        }
        .file-drop {
            border: 3px dashed #aaa;
            padding: 20px;
            margin: 15px 0;
            min-height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f5f5f5;
            border-radius: 8px;
            transition: background 0.2s;
        }
        .file-drop:hover, .file-drop.dragover {
            background: #e0e0e0;
        }
        .file-list {
            list-style: none;
            padding: 0;
            margin: 10px 0;
        }
        .file-list li {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px;
            border-bottom: 1px solid #eee;
            font-size: 14px;
        }
        .file-list button {
            background: #dc3545;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.2s;
        }
        .file-list button:hover {
            background: #c82333;
        }
        button {
            padding: 12px;
            margin: 10px 0;
            font-size: 16px;
            background: #28a745;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            width: calc(100% - 24px);
            transition: background 0.2s;
        }
        button:hover {
            background: #218838;
        }
        button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        #response, #error {
            margin-top: 20px;
            font-size: 14px;
        }
        #response a {
            color: #007bff;
            text-decoration: none;
        }
        #response a:hover {
            text-decoration: underline;
        }
        #previewSection img {
            max-width: 200px;
            margin: 10px 0;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        #progressBar {
            width: 100%;
            height: 20px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }
        #progress {
            height: 100%;
            background: #28a745;
            width: 0;
            transition: width 0.3s;
        }
        #progressText {
            font-size: 14px;
            margin: 5px 0;
        }
        #projectForm, #previewSection, #loadingSection, #completedSection {
            display: none;
        }
        .hidden {
            display: none;
        }
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #28a745;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }
            .log-section {
                margin-left: 0;
                margin-top: 20px;
                width: 100%;
            }
            .main-section {
                max-width: 100%;
            }
        }
        #projectList {
            margin-top: 20px;
        }
        #projectList ul {
            list-style: none;
            padding: 0;
        }
        #projectList li {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid #eee;
        }
        #projectList button {
            background: #dc3545;
        }
        #projectList button:hover {
            background: #c82333;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="main-section">
            <h1>Проекты AurumBot</h1>
            <div id="loginForm">
                <input type="password" id="githubToken" placeholder="Введите GitHub токен" required>
                <button onclick="login()">Войти</button>
                <div id="error"></div>
                <div id="projectList"></div>
            </div>
            <div id="projectForm">
                <input type="text" id="projectName" placeholder="Введите название проекта" required>
                <label for="filesInput">Файлы или папка проекта:</label>
                <div class="file-drop" id="filesDrop" ondragover="event.preventDefault();" ondrop="handleDrop(event, 'filesInput')" ondragenter="this.classList.add('dragover')" ondragleave="this.classList.remove('dragover')">
                    Перетащите файлы, папку или ZIP сюда или кликните для выбора
                </div>
                <input type="file" id="filesInput" multiple webkitdirectory accept=".png,.pdn,.zip" style="display: none;">
                <ul id="filesList" class="file-list"></ul>
                <button onclick="proceedToPreview()">Перейти к превью</button>
            </div>
            <div id="previewSection">
                <label>Файл превью (автовыбор: арт.png/art.png, если есть):</label>
                <div id="previewInfo"></div>
                <img id="previewImage" src="" alt="Превью" style="display: none;">
                <div class="file-drop" id="previewDrop" ondragover="event.preventDefault();" ondrop="handleDrop(event, 'previewFile')" ondragenter="this.classList.add('dragover')" ondragleave="this.classList.remove('dragover')">
                    Перетащите новый файл превью (PNG) сюда или кликните для выбора
                </div>
                <input type="file" id="previewFile" accept=".png" style="display: none;">
                <ul id="previewFileList" class="file-list"></ul>
                <button onclick="document.getElementById('projectForm').style.display='block';document.getElementById('previewSection').style.display='none';">Вернуться назад</button>
                <button id="createButton" onclick="createProject()">Создать проект</button>
            </div>
            <div id="loadingSection">
                <div class="spinner"></div>
                <p>Идёт создание проекта...</p>
            </div>
            <div id="completedSection">
                <p id="response"></p>
                <button onclick="resetForm()">Загрузить ещё</button>
                <button onclick="downloadZip()">Скачать</button>
            </div>
        </div>
        <div class="log-section">
            <h3>Логи</h3>
            <div id="logContent"></div>
        </div>
    </div>
    <script>
        let githubToken = '';
        let projectFiles = [];
        let previewFile = null;
        let zipDownloadUrl = '';

        function addLog(message) {
            const logContent = document.getElementById('logContent');
            const logEntry = document.createElement('p');
            logEntry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            logContent.appendChild(logEntry);
            logContent.scrollTop = logContent.scrollHeight;
        }

        function updateFileList(inputId, listId, fileArray) {
            const list = document.getElementById(listId);
            list.innerHTML = '';
            fileArray.forEach((file, index) => {
                const li = document.createElement('li');
                li.textContent = file.webkitRelativePath || file.name;
                const removeBtn = document.createElement('button');
                removeBtn.textContent = 'Удалить';
                removeBtn.onclick = () => {
                    fileArray.splice(index, 1);
                    updateFileList(inputId, listId, fileArray);
                    if (inputId === 'previewFile' && !fileArray.length) {
                        document.getElementById('previewImage').style.display = 'none';
                        previewFile = null;
                    }
                };
                li.appendChild(removeBtn);
                list.appendChild(li);
            });
            document.getElementById(inputId).value = '';
        }

        async function handleDrop(event, inputId) {
            event.preventDefault();
            event.target.classList.remove('dragover');
            const items = event.dataTransfer.items;
            const files = [];
            for (const item of items) {
                const entry = item.webkitGetAsEntry();
                if (entry) {
                    if (entry.isDirectory) {
                        const entries = await readDirectory(entry);
                        files.push(...entries);
                    } else {
                        files.push(item.getAsFile());
                    }
                }
            }
            if (inputId === 'filesInput') {
                projectFiles = projectFiles.concat(files);
                updateFileList('filesInput', 'filesList', projectFiles);
                addLog(`Загружено ${files.length} файлов/папок`);
            } else if (inputId === 'previewFile') {
                const file = files[0];
                if (file && file.type === 'image/png') {
                    previewFile = file;
                    updateFileList('previewFile', 'previewFileList', [previewFile]);
                    const reader = new FileReader();
                    reader.onload = () => {
                        document.getElementById('previewImage').src = reader.result;
                        document.getElementById('previewImage').style.display = 'block';
                    };
                    reader.readAsDataURL(file);
                    addLog(`Загружен файл превью: ${file.name}`);
                } else {
                    addLog('Ошибка: Превью должен быть PNG');
                }
            }
        }

        async function readDirectory(directory) {
            const reader = directory.createReader();
            const entries = [];
            const readEntries = () => new Promise(resolve => reader.readEntries(resolve));
            let results = await readEntries();
            while (results.length) {
                for (const entry of results) {
                    if (entry.isDirectory) {
                        const subEntries = await readDirectory(entry);
                        entries.push(...subEntries);
                    } else {
                        entries.push(await new Promise(resolve => entry.file(resolve)));
                    }
                }
                results = await readEntries();
            }
            return entries;
        }

        async function login() {
            githubToken = document.getElementById('githubToken').value;
            const errorDiv = document.getElementById('error');
            if (!githubToken) {
                errorDiv.innerText = 'Введите GitHub токен.';
                addLog('Ошибка: Не введён GitHub токен');
                return;
            }

            errorDiv.innerText = 'Проверка токена...';
            addLog('Проверка токена...');
            try {
                const response = await fetch('https://api.github.com/user', {
                    headers: {
                        'Authorization': `Bearer ${githubToken}`,
                        'Accept': 'application/vnd.github.v3+json'
                    }
                });
                if (response.status === 200) {
                    const user = await response.json();
                    if (user.login === 'Endermanik13') {
                        document.getElementById('loginForm').classList.add('hidden');
                        document.getElementById('projectForm').style.display = 'block';
                        errorDiv.innerText = '';
                        addLog('Успешная авторизация: Endermanik13');
                        loadProjectList();
                    } else {
                        errorDiv.innerText = 'Недействительный токен: не авторизован для Endermanik13.';
                        addLog('Ошибка: Токен не для Endermanik13');
                    }
                } else {
                    errorDiv.innerText = `Ошибка: ${response.statusText}`;
                    addLog(`Ошибка авторизации: ${response.statusText}`);
                }
            } catch (error) {
                errorDiv.innerText = `Ошибка: ${error.message}`;
                addLog(`Ошибка авторизации: ${error.message}`);
            }
        }

        async function loadProjectList() {
            const projectList = document.getElementById('projectList');
            projectList.innerHTML = '<h3>Существующие проекты</h3><ul id="projects"></ul>';
            try {
                const response = await fetch('https://api.github.com/repos/Endermanik13/AurumBotFiles/contents/projects', {
                    headers: {
                        'Authorization': `Bearer ${githubToken}`,
                        'Accept': 'application/vnd.github.v3+json'
                    }
                });
                if (response.status === 200) {
                    const contents = await response.json();
                    const ul = document.getElementById('projects');
                    for (const item of contents) {
                        if (item.name.endsWith('.json')) {
                            const projectName = item.name.replace('.json', '');
                            const li = document.createElement('li');
                            li.textContent = projectName;
                            const deleteBtn = document.createElement('button');
                            deleteBtn.textContent = 'Удалить';
                            deleteBtn.onclick = () => deleteProject(projectName);
                            li.appendChild(deleteBtn);
                            ul.appendChild(li);
                        }
                    }
                    addLog('Загружен список проектов');
                } else {
                    addLog('Папка projects пуста или отсутствует');
                }
            } catch (error) {
                addLog(`Ошибка загрузки проектов: ${error.message}`);
            }
        }

        async function deleteProject(projectName) {
            if (!confirm(`Удалить проект "${projectName}"?`)) return;
            addLog(`Удаление проекта ${projectName}...`);
            try {
                // Delete project.json
                const jsonResponse = await fetch(`https://api.github.com/repos/Endermanik13/AurumBotFiles/contents/projects/${projectName}.json`, {
                    method: 'DELETE',
                    headers: {
                        'Authorization': `Bearer ${githubToken}`,
                        'Accept': 'application/vnd.github.v3+json'
                    },
                    body: JSON.stringify({
                        message: `Delete project ${projectName}.json`,
                        sha: (await (await fetch(`https://api.github.com/repos/Endermanik13/AurumBotFiles/contents/projects/${projectName}.json`, {
                            headers: { 'Authorization': `Bearer ${githubToken}`, 'Accept': 'application/vnd.github.v3+json' }
                        })).json()).sha
                    })
                });
                if (jsonResponse.status !== 200) {
                    addLog(`Ошибка удаления ${projectName}.json: ${jsonResponse.statusText}`);
                    return;
                }

                // Delete project folder
                const folderResponse = await fetch(`https://api.github.com/repos/Endermanik13/AurumBotFiles/contents/${projectName}`, {
                    method: 'DELETE',
                    headers: {
                        'Authorization': `Bearer ${githubToken}`,
                        'Accept': 'application/vnd.github.v3+json'
                    },
                    body: JSON.stringify({
                        message: `Delete project folder ${projectName}`,
                        sha: (await (await fetch(`https://api.github.com/repos/Endermanik13/AurumBotFiles/contents/${projectName}`, {
                            headers: { 'Authorization': `Bearer ${githubToken}`, 'Accept': 'application/vnd.github.v3+json' }
                        })).json()).sha
                    })
                });
                if (folderResponse.status !== 200) {
                    addLog(`Ошибка удаления папки ${projectName}: ${folderResponse.statusText}`);
                    return;
                }

                addLog(`Проект ${projectName} удалён`);
                loadProjectList();
            } catch (error) {
                addLog(`Ошибка удаления проекта: ${error.message}`);
            }
        }

        document.getElementById('filesInput').addEventListener('change', () => {
            projectFiles = projectFiles.concat(Array.from(document.getElementById('filesInput').files));
            updateFileList('filesInput', 'filesList', projectFiles);
            addLog(`Выбрано ${projectFiles.length} файлов/папок`);
        });

        document.getElementById('previewFile').addEventListener('change', () => {
            previewFile = document.getElementById('previewFile').files[0];
            if (previewFile) {
                updateFileList('previewFile', 'previewFileList', [previewFile]);
                const reader = new FileReader();
                reader.onload = () => {
                    document.getElementById('previewImage').src = reader.result;
                    document.getElementById('previewImage').style.display = 'block';
                };
                reader.readAsDataURL(previewFile);
                addLog(`Выбран файл превью: ${previewFile.name}`);
            }
        });

        function proceedToPreview() {
            if (!document.getElementById('projectName').value) {
                document.getElementById('response').innerText = 'Введите название проекта.';
                addLog('Ошибка: Не указано название проекта');
                return;
            }
            if (projectFiles.length === 0) {
                document.getElementById('response').innerText = 'Загрузите хотя бы один файл.';
                addLog('Ошибка: Не загружены файлы');
                return;
            }
            document.getElementById('projectForm').style.display = 'none';
            document.getElementById('previewSection').style.display = 'block';
            const previewInfo = document.getElementById('previewInfo');
            const autoPreview = projectFiles.find(f => f.name.toLowerCase() === 'арт.png' || f.name.toLowerCase() === 'art.png');
            if (autoPreview) {
                previewFile = autoPreview;
                previewInfo.innerText = `Автовыбор превью: ${autoPreview.name}`;
                updateFileList('previewFile', 'previewFileList', [autoPreview]);
                const reader = new FileReader();
                reader.onload = () => {
                    document.getElementById('previewImage').src = reader.result;
                    document.getElementById('previewImage').style.display = 'block';
                };
                reader.readAsDataURL(autoPreview);
                addLog(`Автовыбор превью: ${autoPreview.name}`);
            } else {
                previewInfo.innerText = 'Файл арт.png/art.png не найден. Загрузите файл превью.';
                addLog('Превью не найдено, требуется загрузка');
            }
        }

        async function createProject() {
            const projectName = document.getElementById('projectName').value;
            const responseDiv = document.getElementById('response');
            const progress = document.getElementById('progress');
            const progressText = document.getElementById('progressText');
            const createButton = document.getElementById('createButton');

            if (!projectName) {
                responseDiv.innerText = 'Введите название проекта.';
                addLog('Ошибка: Не указано название проекта');
                return;
            }

            // Check for duplicate project
            const projectCheck = await fetch(`https://api.github.com/repos/Endermanik13/AurumBotFiles/contents/projects/${projectName}.json`, {
                headers: {
                    'Authorization': `Bearer ${githubToken}`,
                    'Accept': 'application/vnd.github.v3+json'
                }
            });
            if (projectCheck.status === 200) {
                responseDiv.innerText = `Ошибка: Проект "${projectName}" уже существует.`;
                addLog(`Ошибка: Проект "${projectName}" уже существует`);
                return;
            }

            createButton.disabled = true;
            createButton.classList.add('hidden');
            document.getElementById('previewSection').style.display = 'none';
            document.getElementById('loadingSection').style.display = 'block';
            progress.style.width = '0%';
            progressText.innerText = '0% (0/5 этапа)';
            addLog('Начато создание проекта');

            try {
                // Step 1: Process and upload files
                const fileMetadata = [];
                const onlyPaintFiles = projectFiles.every(f => f.name.endsWith('.png') || f.name.endsWith('.pdn'));
                for (const file of projectFiles) {
                    const reader = new FileReader();
                    reader.readAsDataURL(file);
                    await new Promise(resolve => reader.onload = resolve);
                    const base64Content = reader.result.split(',')[1];
                    const path = file.webkitRelativePath || file.name;
                    const isPaintFile = path.endsWith('.png') || path.endsWith('.pdn');
                    const uploadPath = onlyPaintFiles ? `${projectName}/${path}` : `${projectName}/${isPaintFile ? 'Итог' : 'other'}/${path}`;
                    const uploadResponse = await fetch(`https://api.github.com/repos/Endermanik13/AurumBotFiles/contents/${uploadPath}`, {
                        method: 'PUT',
                        headers: {
                            'Authorization': `Bearer ${githubToken}`,
                            'Accept': 'application/vnd.github.v3+json'
                        },
                        body: JSON.stringify({
                            message: `Add ${path} to ${projectName}`,
                            content: base64Content
                        })
                    });
                    if (uploadResponse.status !== 201) {
                        responseDiv.innerText = `Ошибка загрузки ${path}: ${uploadResponse.statusText}`;
                        addLog(`Ошибка загрузки ${path}: ${uploadResponse.statusText}`);
                        document.getElementById('loadingSection').style.display = 'none';
                        createButton.disabled = false;
                        createButton.classList.remove('hidden');
                        document.getElementById('previewSection').style.display = 'block';
                        return;
                    }
                    fileMetadata.push({
                        path: path,
                        size_mb: (file.size / (1024 * 1024)).toFixed(2),
                        download_url: `https://raw.githubusercontent.com/Endermanik13/AurumBotFiles/main/${uploadPath}`
                    });
                    addLog(`Файл ${path} загружен в ${uploadPath}`);
                }
                progress.style.width = '20%';
                progressText.innerText = '20% (1/5 этапа)';

                // Step 2: Trigger workflow
                await new Promise(resolve => setTimeout(resolve, 1000));
                progress.style.width = '40%';
                progressText.innerText = '40% (2/5 этапа)';
                addLog('Запуск workflow...');

                const dispatchResponse = await fetch('https://api.github.com/repos/Endermanik13/AurumBotFiles/dispatches', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${githubToken}`,
                        'Accept': 'application/vnd.github.v3+json'
                    },
                    body: JSON.stringify({
                        event_type: 'create-project',
                        client_payload: {
                            project_name: projectName,
                            file_metadata: JSON.stringify(fileMetadata)
                        }
                    })
                });

                if (dispatchResponse.status !== 204) {
                    responseDiv.innerText = `Ошибка запуска workflow: ${dispatchResponse.statusText}`;
                    addLog(`Ошибка запуска workflow: ${dispatchResponse.statusText}`);
                    document.getElementById('loadingSection').style.display = 'none';
                    createButton.disabled = false;
                    createButton.classList.remove('hidden');
                    document.getElementById('previewSection').style.display = 'block';
                    return;
                }

                // Step 3: Wait for workflow to start
                await new Promise(resolve => setTimeout(resolve, 2000));
                progress.style.width = '60%';
                progressText.innerText = '60% (3/5 этапа)';
                addLog('Ожидание старта workflow...');

                // Step 4: Poll for workflow completion
                let workflowCompleted = false;
                let workflowId = null;
                for (let i = 0; i < 30; i++) {
                    const runsResponse = await fetch('https://api.github.com/repos/Endermanik13/AurumBotFiles/actions/runs', {
                        headers: {
                            'Authorization': `Bearer ${githubToken}`,
                            'Accept': 'application/vnd.github.v3+json'
                        }
                    });
                    if (runsResponse.status !== 200) {
                        responseDiv.innerText = `Ошибка проверки workflow: ${runsResponse.statusText}`;
                        addLog(`Ошибка проверки workflow: ${runsResponse.statusText}`);
                        document.getElementById('loadingSection').style.display = 'none';
                        createButton.disabled = false;
                        createButton.classList.remove('hidden');
                        document.getElementById('previewSection').style.display = 'block';
                        return;
                    }
                    const runs = await runsResponse.json();
                    const run = runs.workflow_runs.find(r => r.event === 'repository_dispatch' && r.status !== 'completed');
                    if (run) {
                        workflowId = run.id;
                    } else if (workflowId) {
                        const runStatus = await fetch(`https://api.github.com/repos/Endermanik13/AurumBotFiles/actions/runs/${workflowId}`, {
                            headers: {
                                'Authorization': `Bearer ${githubToken}`,
                                'Accept': 'application/vnd.github.v3+json'
                            }
                        });
                        const runData = await runStatus.json();
                        if (runData.status === 'completed' && runData.conclusion === 'success') {
                            workflowCompleted = true;
                            break;
                        }
                    }
                    await new Promise(resolve => setTimeout(resolve, 2000));
                }

                progress.style.width = '80%';
                progressText.innerText = '80% (4/5 этапа)';
                addLog('Workflow завершён');

                if (!workflowCompleted) {
                    responseDiv.innerText = 'Ошибка: Workflow не завершился вовремя.';
                    addLog('Ошибка: Workflow не завершился вовремя');
                    document.getElementById('loadingSection').style.display = 'none';
                    createButton.disabled = false;
                    createButton.classList.remove('hidden');
                    document.getElementById('previewSection').style.display = 'block';
                    return;
                }

                // Step 5: Show completed section
                progress.style.width = '100%';
                progressText.innerText = '100% (5/5 этапа)';
                addLog('Проект готов');
                document.getElementById('loadingSection').style.display = 'none';
                document.getElementById('completedSection').style.display = 'block';
                zipDownloadUrl = `https://raw.githubusercontent.com/Endermanik13/AurumBotFiles/main/${projectName}/Инферно.zip`;
                responseDiv.innerHTML = `
                    Проект "${projectName}" успешно создан!<br>
                    Местоположение: <a href="https://github.com/Endermanik13/AurumBotFiles/tree/main/${projectName}" target="_blank">github.com/Endermanik13/AurumBotFiles/tree/main/${projectName}</a>
                `;
                addLog(`Проект "${projectName}" создан, ZIP: ${zipDownloadUrl}`);
            } catch (error) {
                responseDiv.innerText = `Ошибка: ${error.message}`;
                addLog(`Ошибка: ${error.message}`);
                document.getElementById('loadingSection').style.display = 'none';
                createButton.disabled = false;
                createButton.classList.remove('hidden');
                document.getElementById('previewSection').style.display = 'block';
            }
        }

        function downloadZip() {
            window.open(zipDownloadUrl, '_blank');
            addLog('Скачивание ZIP...');
        }

        function resetForm() {
            document.getElementById('completedSection').style.display = 'none';
            document.getElementById('projectForm').style.display = 'block';
            document.getElementById('projectName').value = '';
            projectFiles = [];
            previewFile = null;
            updateFileList('filesInput', 'filesList', projectFiles);
            updateFileList('previewFile', 'previewFileList', []);
            document.getElementById('previewImage').style.display = 'none';
            document.getElementById('previewInfo').innerText = '';
            document.getElementById('response').innerText = '';
            addLog('Форма сброшена для нового проекта');
        }
    </script>
</body>
</html>
